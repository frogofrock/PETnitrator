# PETnitrator Firmware (STM32 + PlatformIO)

## 📦 Проект
Модульная прошивка для платы Creality V4.2.2 (STM32F103RE) с управлением нагревателем, дисплеем, энкодером и шаговым двигателем.

## 📁 Структура

```
├── src/
│   ├── main.cpp               # Главная логика: setup(), loop()
│   ├── Thermistor.cpp         # Работа с термистором
│   ├── HotendController.cpp   # Контроль температуры, PID
│   ├── StepperMotor.cpp       # Управление шаговиком
│   ├── DisplayUI.cpp          # Отрисовка дисплея
│   └── EncoderUI.cpp          # Логика энкодера
│
├── include/
│   ├── Thermistor.h
│   ├── HotendController.h
│   ├── StepperMotor.h
│   ├── DisplayUI.h
│   ├── EncoderUI.h
│   └── Settings.h             # Константы, пины, EEPROM
│
├── platformio.ini             # Конфигурация сборки PIO
└── README.md                  # Это описание
```

## 🧠 Особенности
- PID-регулирование температуры с автокалибровкой
- Сохранение параметров в EEPROM
- Управление через энкодер + дисплей
- Безопасное отключение при тройном клике

## 🔧 Используемые библиотеки
- U8g2
- GyverEncoder
- GyverPID
- GyverStepper
- TMCStepper
- EEPROM (STM32)

## 🚀 Как собрать
```
platformio run --target upload
```

## 🔄 PID автокалибровка
Удержание энкодера 5 секунд запускает автоматическую калибровку PID. После завершения значения сохраняются в EEPROM и загружаются при старте.
